<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dimonds Hotels — Hotel</title>
  <style>
    :root{--accent:#b45309;--muted:#475569}
    *{box-sizing:border-box}
    body{font-family:Inter,Arial;background:#fff;margin:0;color:#0f172a}
    .container{max-width:900px;margin:0 auto;padding:18px}
    .hero{display:flex;gap:18px;align-items:flex-start}
    .left{flex:1}
    .right{width:320px}
    .card{background:#fff;padding:14px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
    .muted{color:var(--muted)}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8}
    button.primary{background:var(--accent);color:#fff;padding:12px;border-radius:10px;border:0;cursor:pointer}
    @media (max-width:820px){.hero{flex-direction:column}.right{width:100%}}
  </style>
</head>
<body>
  <div class="container">
    <a href="listings.html" class="muted">← Back to listings</a>
    <div id="hotelWrap" style="margin-top:12px"></div>
  </div>
 
<script>
  const params=new URLSearchParams(location.search);
  const id=parseInt(params.get('id'))||null;
  const checkin=params.get('checkin')||'';
  const checkout=params.get('checkout')||'';
  const hotels=JSON.parse(localStorage.getItem('dimonds_hotels')||'[]');
  const hotel=hotels.find(h=>h.id===id) || hotels[0] || {name:'Unknown Hotel',city:'',price:0,rating:0,desc:'No description'};
 
  document.getElementById('hotelWrap').innerHTML = `
    <div class="hero">
      <div class="left">
        <div class="card">
          <div style="font-weight:800;font-size:20px">${hotel.name}</div>
          <div class="muted">${hotel.city} • ${hotel.type || ''} • ⭐ ${hotel.rating}</div>
          <p style="margin-top:10px">${hotel.desc}</p>
          <hr />
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <div style="flex:1"><strong>$${hotel.price}</strong> / night</div>
            <div class="muted">${checkin ? 'Check-in: '+checkin : ''}</div>
            <div class="muted">${checkout ? 'Check-out: '+checkout : ''}</div>
          </div>
        </div>
      </div>
 
      <div class="right">
        <div class="card">
          <div style="font-weight:700;margin-bottom:8px">Reserve a room</div>
          <label class="muted">Your name</label>
          <input id="fullName" placeholder="Full name" />
          <label class="muted">Email</label>
          <input id="email" placeholder="you@example.com" />
          <label class="muted">Rooms</label>
          <select id="rooms"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
          <label class="muted">Special requests</label>
          <textarea id="requests" rows="3" placeholder="e.g., late check-in"></textarea>
          <div style="margin-top:10px;display:flex;gap:8px;justify-content:space-between;align-items:center">
            <div style="font-weight:800">Total: $<span id="totalPrice">${hotel.price}</span></div>
            <button class="primary" onclick="bookNow()">Confirm Booking</button>
          </div>
        </div>
        <div style="height:12px"></div>
        <div class="card muted"><strong>Note:</strong> This demo app stores bookings locally (in your browser). No server required.</div>
      </div>
    </div>
  `;
 
  function calcTotal(){
    const rooms=parseInt(document.getElementById('rooms').value)||1;
    document.getElementById('totalPrice').textContent = (rooms * hotel.price).toFixed(2);
  }
  document.getElementById('rooms').addEventListener('change',calcTotal);
 
  function bookNow(){
    const name=document.getElementById('fullName').value.trim();
    const email=document.getElementById('email').value.trim();
    const rooms=parseInt(document.getElementById('rooms').value)||1;
    const requests=document.getElementById('requests').value.trim();
    if(!name||!email){alert('Please enter name and email');return}
 
    const bookings = JSON.parse(localStorage.getItem('dimonds_bookings')||'[]');
    const bookingId = bookings.length?bookings[bookings.length-1].id+1:1;
    const booking = {
      id:bookingId,
      hotelId:hotel.id,
      hotelName:hotel.name,
      name,
      email,
      rooms,
      requests,
      checkin,
      checkout,
      total:parseFloat((rooms*hotel.price).toFixed(2)),
      created: new Date().toISOString()
    };
    bookings.push(booking);
    localStorage.setItem('dimonds_bookings',JSON.stringify(bookings));
 
    // Redirect to confirmation/listing of bookings
    window.location.href = 'bookings.html?bookingId='+bookingId;
  }
</script>
</body>
</html>
